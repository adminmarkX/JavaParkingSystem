<html lang="en">

<head>
    <meta charset="UTF-8" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="./js/bootstrap.bundle.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="main.css" />
    <script>
        $(function () {
            $("header").load("../navbar/navbar.php");
            $("footer").load("../footer2/footer2.php");
        });
    </script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="signup.css" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
</head>

<body>
    <header></header>
    <div class="container forms">
        <div class="form login">
            <div class="form-content">
                <h4 class="header">Signup</h4>
                <form action="signup.php" method="post" name="signUpForm" id="SignUpForm">
                    <div class="field input-field">
                        <input type="text" placeholder="username" id="username_val" class="input" name="username" required/>
                    </div>
                    <div class="field input-field">
                        
                        <input type="password" placeholder="password" class="input" name="password" id="pwd_val" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).{8,}"  title="Password must containe at least 1 LowerCase & 1 UpperCase & numbers in the range of [0-9]" required />
                    </div>
                    <div class="field input-field">
                        <input type="email" placeholder="email" id="email_val" class="input" name="email" required/>
                    </div>
                    <div class="field input-field">
                        <input type="text" placeholder="name" id="name_val" class="input" name="name" required/>
                    </div>
                    <div class="field input-field">
                        <input type="text" placeholder="lastname" id="lastname_val" class="input" name="lastname" required/>
                    </div>

                    <div class="field input-field">
                        <input type="text" placeholder="phone" class="input" name="phone" id="phone_val" required/>
                    </div>
                    <div class="field input-field">
                        <input type="text" placeholder="address" id="address_val" class="input" name="address" required/>
                    </div>
                    <div class="field input-field">
                        <input type="text" placeholder="tk" class="input" name="tk" id="tk" required/>
                    </div>
                    <div class="field input-field">
                        <input type="text" placeholder="Country" class="input" id="country_val" name="country" required/>
                    </div>
                    <div class="field input-field">
                        <input type="password" placeholder="re-type password" id="repwd_val" class="input"
                            name="repassword" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).{8,}" required />
                    </div>
                    <div class="field button-field">
                        <button type="submit" id="processForm">SignUp</button>
                    </div>
                    <div class="form-link">
                        <span>Already have an account?
                            <a href="../login2/login2.html" class="signup-link">login</a></span>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <footer></footer>
</body>
<script type="text/javascript">
	$(function(){
		$('#processForm').click(function(e){
           
			var valid = this.form.checkValidity();

			if(valid){


			var username 	= $('#username_val').val();
			var pwd	= $('#pwd_val').val();
			var email 		= $('#email_val').val();
            var name       = $('#name_val').val();
            var lastname       = $('#lastname_val').val();
            var phone       = $('#phone_val').val();
            var address        = $('#address_val').val();
            var tk        = $('#tk').val();
            var country          = $('#country_val').val();
			var repwd       = $('#repwd_val').val();
			
            e.preventDefault();	

				if(pwd == repwd){
				$.ajax({
					type: 'POST',
					url: 'signup.php',
					data: {username: username,passwords: pwd,email: email,name: name,lastname: lastname,phone: phone,
                        address: address,tk: tk,country:country},
					success: function(data){
					Swal.fire({
								title: 'Successful',
                                text:"Redirecting in 2 seconds.",
								type: 'success',
                                timer: 2000,
                                showConfirmButton: false
								}).then(function(){
                                    window.location.href = "../login2/login2.html";
                                }).then(function(){
                                    $('#SignUpForm').reset();
                                });
							
					},
					error: function(data){
						Swal.fire({
								'title': 'Errors',
								'text': 'There were errors while saving the data.',
								'type': 'error'
								})
					}
				});
               
			}else{
                Swal.fire({
								'title': 'Error',
								'text': 'Password not confirmed',
                                'type': 'error'
								})
							
            }

				
			}
		});		

		
	});
	
</script>

</html>